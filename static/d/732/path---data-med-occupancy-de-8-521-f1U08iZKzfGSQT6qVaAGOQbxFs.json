{"data":{"markdownRemark":{"html":"<script src='https://tmroyal.github.io/Chart.HeatMap/Chart.HeatMap.S.min.js'></script>\n<div style=\"height: 500px; width: 100%; overflow-x: scroll;\">\n  <canvas id=\"container\" style=\"min-width: {{ site.data.MEDOCCUPANCY | size | minus: 1 | times: 20 | plus: 150 }}px; max-height: 440px; margin: 0 auto\"></canvas>\n</div>\n<p><a href=\"https://docs.google.com/spreadsheets/d/e/2PACX-1vRpbqc-2MwM-s9JtgXKFbfNmNOaTkve2rPmUxZvMoiJdYTJENStLX1W6i47mb-RURj3Or2oXRjPLhgD/pubhtml?gid=0&#x26;single=true&#x26;widget=true&#x26;headers=false\">原始數據</a></p>\n<p>數據等級：<a href=\"/faq/#datalevel\">第一級</a></p>\n<p>資料來源：<a href=\"http://www.search.gov.hk/result?query=%22occupancy+rates%22+%22medical+wards%22+%22statistics%22+%22public%20hospitals%22&#x26;search_but=&#x26;ui_charset=utf-8&#x26;web=this&#x26;output=xml_no_dtd&#x26;client=depts&#x26;proxystylesheet=ogcio_home_adv_frontend&#x26;ui_lang=en&#x26;r_lang=&#x26;gp1=gia_home&#x26;gp0=gia_home&#x26;web=this&#x26;txtonly=0&#x26;tpl_id=stdsearch&#x26;oe=UTF-8&#x26;ie=UTF-8&#x26;sort=date%3AS%3AS%3Ad1&#x26;site=gia_home&#x26;num=50\">政府一站通搜尋功能 www.search.gov.hk</a></p>\n<script>\n  function ctx(elementId){\n    return document.getElementById(elementId).getContext('2d');\n  }\n\n  // completely arbitrary data\n  var data = {{ site.data.MEDOCCUPANCY | jsonify }};\n  var matrixData = {\n    labels: [],\n    datasets: []\n  };\n  \n  for (var i in data){\n    if (i == 0){\n      var labels = data[i];\n      labels.splice(0,1);\n      for (var j in labels)\n        matrixData.datasets[j] = {\n          label: labels[j],\n          data: []\n        };\n    }else{\n      var index = data.length-i;\n      matrixData.labels.push(data[index][0]);\n      for (var j in data[i]){\n        if (j==0)\n          continue;\n        matrixData.datasets[j-1].data[i-1] = parseInt(data[index][j].match(/([0-9]*)/g)[0]);\n        if (!matrixData.datasets[j-1].data[i-1])\n          matrixData.datasets[j-1].data[i-1] = 0;\n      }\n    }\n      if (i > 60) // too many entries already\n        break;  //abort\n  }\n  console.log(matrixData);\n\n  var sampleChart = new Chart(ctx('container')).HeatMap(matrixData, {\n    responsive: false,\n    labelScale: 0.6,\n    rounded: true,\n    colors: [ \"rgba(220,220,220,0.9)\", \"rgba(216,11,39,0.1)\", \"rgba(216,11,39,0.9)\"],\n    labelFontColor: \"rgba(250,250,250,1.0)\",\n    options: {\n      scales: {\n        xAxes:[{ position: 'top' }]\n      }\n    }    \n  });\n</script>","frontmatter":{"path":"/data/med-occupancy","title":"內科床位佔用率\n（按日熱量圖）"}}},"pageContext":{}}