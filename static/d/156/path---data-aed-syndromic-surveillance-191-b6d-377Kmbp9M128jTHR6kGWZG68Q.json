{"data":{"markdownRemark":{"html":"<script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.0/jquery.min.js\"></script>\n<script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery-sheetrock/1.1.4/dist/sheetrock.min.js\"></script>\n<script src=\"https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.20.1/moment.min.js\"></script>\n<script src=\"https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.20.1/locale/zh-hk.js\"></script>\n<script src=\"https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.1/Chart.min.js\"></script>\n<p>Last updated by Centre for Health Protection:\n<span id=\"lastmodified\"></span></p>\n<p>Last updated by Our Application:\n<span id=\"lastrequested\"></span></p>\n<div class=\"chart-container\" style=\"position: relative; height:600px;\">\n    <canvas id=\"chart\" height=\"600\" width=\"600\"></canvas>\n</div>\n<table id=\"statistics\" class=\"table table-condensed table-striped\"></table>\n  \n<script>  \n  //update chart\n      var flu = [];\n      var hfmd = [];\n      var ge = [];      \n      var conjunctivitis = [];      \n      var labels = [];\nvar chartColors = {\n\tred: 'rgb(255, 99, 132)',\n\torange: 'rgb(255, 159, 64)',\n\tyellow: 'rgb(255, 205, 86)',\n\tgreen: 'rgb(75, 192, 192)',\n\tblue: 'rgb(54, 162, 235)',\n\tpurple: 'rgb(153, 102, 255)',\n\tgrey: 'rgb(201, 203, 207)'\n};\n\tfunction parseDate(dateString){\n\t\treturn moment(dateString,'DD-MMM-YYYY','en');\n\t}\n\tfunction getData(fetchSize){\n\t\t\n    $('#statistics').sheetrock({\n      url: mySpreadsheet,  \n      query: \"select D,E,F,G,H order by D desc\",\n      fetchSize: fetchSize,\n  \n      labels: ['End date of the week 該周的結束日期', 'Weekly average rate for the influenza-like illness syndrome group 流行性感冒病類症狀組的每周平均比率', 'Weekly average rate for the hand, foot and mouth disease syndrome group 手足口病症狀組的每周平均比率', 'Weekly average rate for the acute gastroenteritis syndrome group 急性腸道傳染病症狀組的每周平均比率', 'Weekly average rate for the acute conjunctivitis syndrome group 急性結膜炎症狀組的每周平均比率'],\n      callback: updateChart\n    });  \n    \n\t}\n<pre><code>    var ctx = document.getElementById(\"chart\").getContext(\"2d\");\n    var cfg = {\n        type: 'bar',\n        data: {\n            labels: [],\n            datasets: [{\n                label: \"Influenza-like Illness Syndrome\",\n                data: [],\n                type: 'line',\n                pointRadius: 0,\n                fill: false,\n                lineTension: 0,\n                borderWidth: 2,\n\n                backgroundColor: chartColors.blue,\n                borderColor: chartColors.blue,\n            },{\n                label: \"Hand Foot and Mouth Disease Syndrome\",\n                data: [],\n                type: 'line',\n                pointRadius: 0,\n                fill: false,\n                lineTension: 0,\n                borderWidth: 2\n            },{\n                label: \"Acute Gastroenteritis Syndrome\",\n                data: [],\n                type: 'line',\n                pointRadius: 0,\n                fill: false,\n                lineTension: 0,\n                borderWidth: 2,\n\n                backgroundColor: chartColors.red,\n                borderColor: chartColors.red,          \n            },{\n                label: \"Acute Conjunctivitis Syndrome\",\n                data: [],\n                type: 'line',\n                pointRadius: 0,\n                fill: false,\n                lineTension: 0,\n                borderWidth: 5,\n\n                backgroundColor: chartColors.green,\n                borderColor: chartColors.green,\n            }]\n        },\n        options: {\n            responsive: true,       \n    maintainAspectRatio: false,\n            title:{\n                display:true,\n                text:'急症科傳染病症狀監測 \\n Accident and Emergency Departments Communicable Diseases Syndromic Surveillance'\n            },\n            scales: {\n                xAxes: [{\n                    type: 'time',\n                    distribution: 'series',\n                    time: {\n                        parser: parseDate\n                    }\n                }],\n                yAxes: [{\n                    scaleLabel: {\n                        display: true,\n                        labelString: 'Weekly Average Rate'\n                    }\n                }]\n            }\n        }\n    };\n    var chart = new Chart(ctx, cfg);\nfunction updateChart(error, options, response) {\n  if (!response.rows){\n    return;\n  }\n  for (var i = 1; i &#x3C; response.rows.length; i++) {\n    labels.push(response.rows[i].cellsArray[0]);\n    flu.push(response.rows[i].cellsArray[1]);\n    hfmd.push(response.rows[i].cellsArray[2]);\n    ge.push(response.rows[i].cellsArray[3]);        \n    conjunctivitis.push(response.rows[i].cellsArray[4]);\n  }\n  chart.config.data.datasets[0].data = flu;\n  chart.config.data.datasets[1].data = hfmd;\n  chart.config.data.datasets[2].data = ge;\n  chart.config.data.datasets[3].data = conjunctivitis;      \n  chart.config.data.labels = labels;\n  console.log(chart.config.data);\n  chart.update();\n  getData(500);\n    }\n\nvar mySpreadsheet = 'https://docs.google.com/spreadsheets/d/1xgMyJ5BT1R-1ZFukNy6oH4_SwaCSag6voon7a4yVkLo/edit?#gid=0';getData(500);\n</code></pre>\n</script>","frontmatter":{"path":"/data/AED-syndromic-surveillance","title":"急症傳染病症狀監測"}}},"pageContext":{}}